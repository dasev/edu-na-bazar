# üéØ –†–ï–®–ï–ù–ò–ï: –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö enb

## üìç –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

**–ù–∞–π–¥–µ–Ω–æ:**
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `enb` –≤ –ø–∞–ø–∫–µ: `C:\python\sites_mysql\enb`
- ‚úÖ –§–∞–π–ª—ã —Ç–∞–±–ª–∏—Ü (`.ibd` –∏ `.frm`)
- ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
  - `user` (9.4 MB) - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
  - `companies` (79.7 MB) - –∫–æ–º–ø–∞–Ω–∏–∏/–º–∞–≥–∞–∑–∏–Ω—ã
  - `advert` (30.4 MB) - –æ–±—ä—è–≤–ª–µ–Ω–∏—è/—Ç–æ–≤–∞—Ä—ã
  - `file` (11.5 MB) - —Ñ–∞–π–ª—ã/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - `categories` (98 KB) - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –§–∞–π–ª—ã –±–∞–∑—ã –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ MySQL (–≤–µ—Ä–æ—è—Ç–Ω–æ 5.7)
- MariaDB 12.1 –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ —Ñ–∞–π–ª—ã
- –ù—É–∂–µ–Ω MySQL 5.7 –¥–ª—è —á—Ç–µ–Ω–∏—è —ç—Ç–∏—Ö —Ñ–∞–π–ª–æ–≤

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å MySQL 5.7 (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

### –ü–æ—á–µ–º—É MySQL 5.7?
–§–∞–π–ª—ã –±–∞–∑—ã —Å–æ–∑–¥–∞–Ω—ã –≤ MySQL 5.7, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–∞ –∏–º–µ–Ω–Ω–æ —ç—Ç–∞ –≤–µ—Ä—Å–∏—è –¥–ª—è –∏—Ö —á—Ç–µ–Ω–∏—è.

### –®–∞–≥–∏:

#### 1. –°–∫–∞—á–∞—Ç—å MySQL 5.7
- –°—Å—ã–ª–∫–∞: https://downloads.mysql.com/archives/community/
- –í–µ—Ä—Å–∏—è: **MySQL 5.7.44** (–ø–æ—Å–ª–µ–¥–Ω—è—è 5.7)
- –û–°: **Windows (x86, 64-bit), ZIP Archive**
- –§–∞–π–ª: `mysql-5.7.44-winx64.zip`

#### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
```powershell
# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É
mkdir C:\mysql57

# –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤ –≤ C:\mysql57
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞: C:\mysql57\bin, C:\mysql57\lib –∏ —Ç.–¥.
```

#### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å MySQL 5.7 —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```powershell
# –û—Ç–∫—Ä—ã—Ç—å PowerShell –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
cd C:\mysql57\bin

# –ó–∞–ø—É—Å—Ç–∏—Ç—å MySQL 5.7 —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ C:\python\sites_mysql
.\mysqld.exe --datadir=C:\python\sites_mysql --console
```

#### 4. –°–æ–∑–¥–∞—Ç—å –¥–∞–º–ø (–≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ PowerShell)
```powershell
cd C:\mysql57\bin

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
.\mysql.exe -u root

# –í MySQL –∫–æ–Ω—Å–æ–ª–∏:
USE enb;
SHOW TABLES;
SELECT COUNT(*) FROM user;
SELECT COUNT(*) FROM companies;
SELECT COUNT(*) FROM advert;

# –í—ã–π—Ç–∏ (Ctrl+C)

# –°–æ–∑–¥–∞—Ç—å –¥–∞–º–ø
.\mysqldump.exe -u root --skip-lock-tables --complete-insert enb > C:\python\edu-na-bazar\enb_real_dump.sql
```

#### 5. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ MariaDB
```powershell
cd C:\python\edu-na-bazar

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å MySQL 5.7 (Ctrl+C –≤ –ø–µ—Ä–≤–æ–º –æ–∫–Ω–µ)

# –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ MariaDB
"C:\Program Files\MariaDB 12.1\bin\mysql.exe" -u root -proot -e "DROP DATABASE IF EXISTS enb; CREATE DATABASE enb CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"
"C:\Program Files\MariaDB 12.1\bin\mysql.exe" -u root -proot enb < enb_real_dump.sql
```

#### 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
```powershell
cd backend\scripts
python migrate_data.py
```

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–µ—Å–ª–∏ MySQL 5.7 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

–ï—Å–ª–∏ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MySQL 5.7, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å MySQL 5.7 —Å –¥–∞–Ω–Ω—ã–º–∏
start_mysql57.bat

# 2. –°–æ–∑–¥–∞—Ç—å –¥–∞–º–ø –∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å
migrate_with_mysql57.bat
```

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 3: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ .ibd —Ñ–∞–π–ª–æ–≤

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å MySQL 5.7, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å:

### –í–∞—Ä–∏–∞–Ω—Ç A: –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ MariaDB
```powershell
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å MariaDB
net stop MariaDB

# 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫—É enb
xcopy /E /I "C:\python\sites_mysql\enb" "C:\Program Files\MariaDB 12.1\data\enb"

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å MariaDB
net start MariaDB

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
"C:\Program Files\MariaDB 12.1\bin\mysql.exe" -u root -proot -e "USE enb; SHOW TABLES;"
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –ú–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑-–∑–∞ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –≤–µ—Ä—Å–∏–π!

### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
–ï—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —á—Ç–µ–Ω–∏—è `.ibd` —Ñ–∞–π–ª–æ–≤:
- `innodb_space`
- `undrop-for-innodb`

–ù–æ —ç—Ç–æ —Å–ª–æ–∂–Ω–æ –∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MySQL 5.7** - —ç—Ç–æ —Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–±!

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º
- ‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–∞–º–ø
- ‚úÖ –ì–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏

### –í—Ä–µ–º—è:
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ: 5 –º–∏–Ω—É—Ç
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞: 2 –º–∏–Ω—É—Ç—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–º–ø–∞: 5 –º–∏–Ω—É—Ç
- –ú–∏–≥—Ä–∞—Ü–∏—è: 10 –º–∏–Ω—É—Ç
- **–ò—Ç–æ–≥–æ: ~25 –º–∏–Ω—É—Ç**

---

## üìù –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

```bash
# 1. –°–∫–∞—á–∞—Ç—å MySQL 5.7.44 ZIP
https://downloads.mysql.com/archives/community/

# 2. –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –≤ C:\mysql57

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏
C:\mysql57\bin\mysqld.exe --datadir=C:\python\sites_mysql

# 4. –°–æ–∑–¥–∞—Ç—å –¥–∞–º–ø (–≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ)
C:\mysql57\bin\mysqldump.exe -u root --skip-lock-tables enb > enb_real_dump.sql

# 5. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ MariaDB
mysql -u root -proot enb < enb_real_dump.sql

# 6. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ PostgreSQL
cd backend\scripts
python migrate_data.py
```

---

## üÜò –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `INSTALL_MYSQL57.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `test_mariadb_connection.bat` - –ø—Ä–æ–≤–µ—Ä–∫–∞ MariaDB
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ MySQL 5.7 –≤ –∫–æ–Ω—Å–æ–ª–∏

**–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ!** üöÄ
