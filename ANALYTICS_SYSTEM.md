# üìä –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞

## –û–±–∑–æ—Ä

–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Å 6 –¥–∞—à–±–æ—Ä–¥–∞–º–∏, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å–æ–±—ã—Ç–∏–π –∏ –º–∏–∫—Ä–æ-–∫–æ–Ω–≤–µ—Ä—Å–∏–π.

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã

### 1. **–û–±—â–∞—è –¥–∏–Ω–∞–º–∏–∫–∞** (–±–∞–∑–æ–≤—ã–π)
- –ù–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –∑–∞ 30 –¥–Ω–µ–π
- –ù–æ–≤—ã–µ –º–∞–≥–∞–∑–∏–Ω—ã –∑–∞ 30 –¥–Ω–µ–π
- –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –∑–∞ 30 –¥–Ω–µ–π
- –¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–π (Pie Chart)

**Endpoint:** `/api/analytics/dashboard`

### 2. **üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
- –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞
- –°—Ä–µ–¥–Ω–∏–π —á–µ–∫
- –í—ã—Ä—É—á–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –î–∏–Ω–∞–º–∏–∫–∞ –≤—ã—Ä—É—á–∫–∏ –ø–æ –¥–Ω—è–º

**Endpoint:** `/api/analytics/financial`

### 3. **üë• –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- –ù–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –°—Ä–µ–¥–Ω—è—è —Å–µ—Å—Å–∏—è
- –î–∏–Ω–∞–º–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏

**Endpoint:** `/api/analytics/user-activity`

### 4. **üéØ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∏ –≤–æ—Ä–æ–Ω–∫–∞**

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- –û–±—â–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã ‚Üí –∑–∞–∫–∞–∑—ã)
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∫–æ—Ä–∑–∏–Ω–∞ ‚Üí –∑–∞–∫–∞–∑
- –ë—Ä–æ—à–µ–Ω–Ω—ã–µ –∫–æ—Ä–∑–∏–Ω—ã

**–ú–∏–∫—Ä–æ-–∫–æ–Ω–≤–µ—Ä—Å–∏–∏:**
- –ö–ª–∏–∫–∏ –ø–æ —Ç–æ–≤–∞—Ä–∞–º
- –ö–ª–∏–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É"
- –ù–∞—á–∞–ª–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –¥–æ –ø–æ–∫—É–ø–∫–∏ (–º–∏–Ω—É—Ç—ã)
- –°—Ä–µ–¥–Ω—è—è —Å—É–º–º–∞ –±—Ä–æ—à–µ–Ω–Ω–æ–π –∫–æ—Ä–∑–∏–Ω—ã

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:**
- –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂ (Funnel)
- –î–∏–Ω–∞–º–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –ø–æ –¥–Ω—è–º
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

**Endpoint:** `/api/analytics/conversion`

### 5. **üì¶ –¢–æ–≤–∞—Ä–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
- –¢–æ–ø-10 —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- –•—É–¥—à–∏–µ —Ç–æ–≤–∞—Ä—ã –ø–æ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- –¢–æ–≤–∞—Ä—ã-–ª–æ–∫–æ–º–æ—Ç–∏–≤—ã (–ø–æ–∫—É–ø–∞—é—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏)
- Cross-sell –ø–∞—Ä—ã (—á–∞—Å—Ç–æ –ø–æ–∫—É–ø–∞–µ–º—ã–µ –≤–º–µ—Å—Ç–µ)

**Endpoint:** `/api/analytics/products`

### 6. **üó∫Ô∏è –ì–µ–æ–≥—Ä–∞—Ñ–∏—è**
- –¢–æ–ø-10 –≥–æ—Ä–æ–¥–æ–≤
- –ó–∞–∫–∞–∑—ã –ø–æ –≥–æ—Ä–æ–¥–∞–º
- –í—ã—Ä—É—á–∫–∞ –ø–æ –≥–æ—Ä–æ–¥–∞–º (Pie Chart)
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ –≥–æ—Ä–æ–¥–∞–º

**Endpoint:** `/api/analytics/geography`

---

## üìà –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π

### –¢–∞–±–ª–∏—Ü–∞ `market.user_events`

**–ü–æ–ª—è:**
- `id` - ID —Å–æ–±—ã—Ç–∏—è
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (nullable)
- `session_id` - ID —Å–µ—Å—Å–∏–∏
- `event_type` - —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è
- `product_id` - ID —Ç–æ–≤–∞—Ä–∞ (nullable)
- `order_id` - ID –∑–∞–∫–∞–∑–∞ (nullable)
- `event_data` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (JSON)
- `created_at` - –≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è

**–¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:**
- `product_click` - –∫–ª–∏–∫ –ø–æ —Ç–æ–≤–∞—Ä—É
- `add_to_cart_click` - –∫–ª–∏–∫ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É"
- `checkout_start` - –Ω–∞—á–∞–ª–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
- `checkout_complete` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è

### API –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞

**Endpoint:** `POST /api/events/track`

**Body:**
```json
{
  "event_type": "add_to_cart_click",
  "product_id": 123,
  "order_id": null,
  "event_data": null
}
```

### Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–£—Ç–∏–ª–∏—Ç–∞:** `frontend/src/utils/analytics.ts`

```typescript
import { trackEvent } from '../utils/analytics'

// –¢—Ä–µ–∫–∏–Ω–≥ –∫–ª–∏–∫–∞ "–í –∫–æ—Ä–∑–∏–Ω—É"
trackEvent('add_to_cart_click', productId)

// –¢—Ä–µ–∫–∏–Ω–≥ –Ω–∞—á–∞–ª–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
trackEvent('checkout_start')

// –¢—Ä–µ–∫–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
trackEvent('checkout_complete', undefined, orderId)
```

**–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤:**
- `ProductPage.tsx` - –∫–ª–∏–∫ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É"
- `CheckoutPage.tsx` - –Ω–∞—á–∞–ª–æ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è

---

## üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤

### –¢–∞–±–ª–∏—Ü–∞ `market.product_views`

**–ü–æ–ª—è:**
- `id` - ID –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (nullable)
- `product_id` - ID —Ç–æ–≤–∞—Ä–∞
- `session_id` - ID —Å–µ—Å—Å–∏–∏
- `created_at` - –≤—Ä–µ–º—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

### API

**Endpoint:** `POST /api/product-views/{product_id}`

**–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤:** `ProductPage.tsx` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ç–æ–≤–∞—Ä–∞)

---

## üó∫Ô∏è –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∫–æ–º–º–∏–≤–æ—è–∂–µ—Ä–∞ (TSP) –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**1. –ú–æ–¥–µ–ª—å:** `backend/models/delivery_route.py`
- –•—Ä–∞–Ω–∏—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
- Waypoints (—Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞)
- –ú–µ—Ç—Ä–∏–∫–∏: distance, duration
- –ì–µ–æ–º–µ—Ç—Ä–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ (polyline)

**2. –°–µ—Ä–≤–∏—Å:** `backend/services/route_optimizer.py`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Yandex Routes API
- –ê–ª–≥–æ—Ä–∏—Ç–º—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
  - –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä (‚â§3 —Ç–æ—á–∫–∏)
  - –ñ–∞–¥–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º (>3 —Ç–æ—á–∫–∏)

**3. –¢–∞–±–ª–∏—Ü–∞:** `market.delivery_routes`

```sql
CREATE TABLE market.delivery_routes (
    id BIGSERIAL PRIMARY KEY,
    order_id BIGINT NOT NULL UNIQUE,
    waypoints JSONB NOT NULL,
    optimized_order JSONB,
    total_distance FLOAT,
    total_duration FLOAT,
    route_geometry TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP NOT NULL DEFAULT NOW()
);
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from services.route_optimizer import RouteOptimizer

optimizer = RouteOptimizer(api_key="your-yandex-key")
result = await optimizer.optimize_waypoints(
    start_point=(55.75, 37.61),  # –°–∫–ª–∞–¥
    waypoints=[(55.76, 37.62), (55.77, 37.63)],  # –ú–∞–≥–∞–∑–∏–Ω—ã
    end_point=(55.78, 37.64)  # –ü–æ–∫—É–ø–∞—Ç–µ–ª—å
)
# result: {optimized_order, distance, duration, geometry}
```

**TODO:**
- –ü–æ–ª—É—á–∏—Ç—å Yandex API –∫–ª—é—á: https://developer.tech.yandex.ru/
- –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é
- –î–æ–±–∞–≤–∏—Ç—å endpoint –≤ orders.py
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞

---

## üöÄ –ó–∞–ø—É—Å–∫ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Backend

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose -f docker-compose.dev.yml restart backend

# –õ–æ–≥–∏
docker-compose -f docker-compose.dev.yml logs backend --tail=100
```

### Frontend

–û—Ç–∫—Ä—ã—Ç—å: `http://localhost:5173/dashboard`

**–í–∫–ª–∞–¥–∫–∏:**
1. üìä –û–±—â–∞—è –¥–∏–Ω–∞–º–∏–∫–∞
2. üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
3. üë• –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. üéØ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∏ –≤–æ—Ä–æ–Ω–∫–∞
5. üì¶ –¢–æ–≤–∞—Ä–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
6. üó∫Ô∏è –ì–µ–æ–≥—Ä–∞—Ñ–∏—è

---

## üìù SQL –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. –¢–∞–±–ª–∏—Ü–∞ user_events

```sql
CREATE TABLE market.user_events (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT,
    session_id VARCHAR(255),
    event_type VARCHAR(50) NOT NULL,
    product_id BIGINT,
    order_id BIGINT,
    event_data TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    CONSTRAINT fk_user_events_user_id 
        FOREIGN KEY (user_id) REFERENCES config.users(id) ON DELETE SET NULL,
    CONSTRAINT fk_user_events_product_id 
        FOREIGN KEY (product_id) REFERENCES market.products(id) ON DELETE SET NULL,
    CONSTRAINT fk_user_events_order_id 
        FOREIGN KEY (order_id) REFERENCES market.orders(id) ON DELETE SET NULL
);

CREATE INDEX ix_market_user_events_user_id ON market.user_events(user_id);
CREATE INDEX ix_market_user_events_session_id ON market.user_events(session_id);
CREATE INDEX ix_market_user_events_event_type ON market.user_events(event_type);
CREATE INDEX ix_market_user_events_product_id ON market.user_events(product_id);
CREATE INDEX ix_market_user_events_order_id ON market.user_events(order_id);
CREATE INDEX ix_market_user_events_created_at ON market.user_events(created_at);
```

### 2. –¢–∞–±–ª–∏—Ü–∞ product_views

```sql
CREATE TABLE market.product_views (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT,
    product_id BIGINT NOT NULL,
    session_id VARCHAR(255),
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    CONSTRAINT fk_product_views_user_id 
        FOREIGN KEY (user_id) REFERENCES config.users(id) ON DELETE SET NULL,
    CONSTRAINT fk_product_views_product_id 
        FOREIGN KEY (product_id) REFERENCES market.products(id) ON DELETE CASCADE
);

CREATE INDEX ix_market_product_views_user_id ON market.product_views(user_id);
CREATE INDEX ix_market_product_views_product_id ON market.product_views(product_id);
CREATE INDEX ix_market_product_views_session_id ON market.product_views(session_id);
CREATE INDEX ix_market_product_views_created_at ON market.product_views(created_at);
```

### 3. –¢–∞–±–ª–∏—Ü–∞ delivery_routes (TODO)

```sql
CREATE TABLE market.delivery_routes (
    id BIGSERIAL PRIMARY KEY,
    order_id BIGINT NOT NULL UNIQUE,
    waypoints JSONB NOT NULL,
    optimized_order JSONB,
    total_distance FLOAT,
    total_duration FLOAT,
    route_geometry TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP NOT NULL DEFAULT NOW(),
    CONSTRAINT fk_delivery_routes_order_id 
        FOREIGN KEY (order_id) REFERENCES market.orders(id) ON DELETE CASCADE
);

CREATE INDEX ix_market_delivery_routes_order_id ON market.delivery_routes(order_id);
CREATE INDEX ix_market_delivery_routes_created_at ON market.delivery_routes(created_at);
```

---

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

1. **ORM mapping errors:**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã relationships –≤ User, Order, CartItem
   - –ó–∞–º–µ–Ω–µ–Ω—ã `backref` –Ω–∞ `back_populates`

2. **SQLAlchemy reserved names:**
   - `metadata` ‚Üí `event_data` –≤ UserEvent

3. **PostgreSQL compatibility:**
   - `SPLIT_PART` ‚Üí `SUBSTRING` –≤ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

4. **Export/Import errors:**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã named exports –≤ –¥–∞—à–±–æ—Ä–¥–∞—Ö

---

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### Backend

```
backend/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ user_event.py          # –ú–æ–¥–µ–ª—å —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ product_view.py        # –ú–æ–¥–µ–ª—å –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ delivery_route.py      # –ú–æ–¥–µ–ª—å –º–∞—Ä—à—Ä—É—Ç–æ–≤ (TODO)
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ route_optimizer.py     # –°–µ—Ä–≤–∏—Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îî‚îÄ‚îÄ api/routers/
    ‚îú‚îÄ‚îÄ analytics.py           # 6 endpoints –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
    ‚îú‚îÄ‚îÄ events.py              # –¢—Ä–µ–∫–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π
    ‚îî‚îÄ‚îÄ product_views.py       # –¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
```

### Frontend

```
frontend/src/pages/Dashboard/
‚îú‚îÄ‚îÄ DashboardPage.tsx          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –≤–∫–ª–∞–¥–∫–∞–º–∏
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useDashboardData.ts    # –ë–∞–∑–æ–≤—ã–π –¥–∞—à–±–æ—Ä–¥
‚îÇ   ‚îú‚îÄ‚îÄ useFinancialData.ts    # –§–∏–Ω–∞–Ω—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ useUserActivityData.ts # –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ useConversionData.ts   # –ö–æ–Ω–≤–µ—Ä—Å–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ useProductAnalytics.ts # –¢–æ–≤–∞—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ useGeoAnalytics.ts     # –ì–µ–æ–≥—Ä–∞—Ñ–∏—è
‚îî‚îÄ‚îÄ components/
    ‚îú‚îÄ‚îÄ FinancialDashboard.tsx
    ‚îú‚îÄ‚îÄ UserActivityDashboard.tsx
    ‚îú‚îÄ‚îÄ ConversionDashboard.tsx
    ‚îú‚îÄ‚îÄ ProductAnalyticsDashboard.tsx
    ‚îî‚îÄ‚îÄ GeoDashboard.tsx
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (TODO)

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤:**
   - –ü–æ–ª—É—á–∏—Ç—å Yandex API –∫–ª—é—á
   - –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é delivery_routes
   - –î–æ–±–∞–≤–∏—Ç—å endpoint –≤ orders.py
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
   - –ü–æ–∫–∞–∑–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –Ω–∞ –∫–∞—Ä—Ç–µ

2. **–£–ª—É—á—à–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:**
   - –ö–æ–≥–æ—Ä—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑
   - A/B —Ç–µ—Å—Ç—ã
   - –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
   - –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ (PDF/Excel)

3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (Redis)
   - –ü—Ä–µ–¥—Ä–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ (Celery)
   - –ò–Ω–¥–µ–∫—Å—ã –ë–î

---

## üìû API Reference

### Analytics Endpoints

| Endpoint | Method | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| `/api/analytics/dashboard` | GET | –ë–∞–∑–æ–≤—ã–π –¥–∞—à–±–æ—Ä–¥ |
| `/api/analytics/financial` | GET | –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| `/api/analytics/user-activity` | GET | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `/api/analytics/conversion` | GET | –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∏ –≤–æ—Ä–æ–Ω–∫–∞ |
| `/api/analytics/products` | GET | –¢–æ–≤–∞—Ä–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| `/api/analytics/geography` | GET | –ì–µ–æ–≥—Ä–∞—Ñ–∏—è |

### Tracking Endpoints

| Endpoint | Method | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| `/api/events/track` | POST | –¢—Ä–µ–∫–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π |
| `/api/product-views/{id}` | POST | –¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ |

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment Variables

```env
# Yandex Routes API (TODO)
YANDEX_ROUTES_API_KEY=your-key-here
```

### DevExtreme Components

–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `Chart` - –ª–∏–Ω–µ–π–Ω—ã–µ –∏ —Å—Ç–æ–ª–±—á–∞—Ç—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
- `PieChart` - –∫—Ä—É–≥–æ–≤—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
- `Funnel` - –≤–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂
- `DataGrid` - —Ç–∞–±–ª–∏—Ü—ã –¥–∞–Ω–Ω—ã—Ö
- `TabPanel` - –≤–∫–ª–∞–¥–∫–∏ –¥–∞—à–±–æ—Ä–¥–æ–≤

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 30.11.2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
