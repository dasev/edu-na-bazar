# ‚úÖ SMS-–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞!

## üéâ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### Backend (FastAPI)

‚úÖ **–ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–ë–ï–ó –ø–∞—Ä–æ–ª–µ–π!)
- `sms_codes` - SMS –∫–æ–¥—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

‚úÖ **API Endpoints:**
- `POST /api/auth/send-sms` - –æ—Ç–ø—Ä–∞–≤–∫–∞ SMS –∫–æ–¥–∞
- `POST /api/auth/verify-sms` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –∏ –≤—ã–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–∞
- `GET /api/auth/me` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

‚úÖ **–°–µ—Ä–≤–∏—Å—ã:**
- `JWTService` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–æ–≤ (90 –¥–Ω–µ–π)
- `SMSService` - –æ—Ç–ø—Ä–∞–≤–∫–∞ SMS (MOCK –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- JWT —Ç–æ–∫–µ–Ω—ã —Å –¥–æ–ª–≥–æ–π —Å–µ—Å—Å–∏–µ–π (90 –¥–Ω–µ–π)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ (3 –ø–æ–ø—ã—Ç–∫–∏ –Ω–∞ –∫–æ–¥)
- –ò—Å—Ç–µ—á–µ–Ω–∏–µ –∫–æ–¥–æ–≤ (5 –º–∏–Ω—É—Ç)

---

### Frontend (React + DevExtreme)

‚úÖ **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `AuthModal` - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `AuthStore` (Zustand) - –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

‚úÖ **UX –∫–∞–∫ –≤ –¶–∏–∞–Ω–µ:**
- –®–∞–≥ 1: –í–≤–æ–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (+ –§–ò–û –¥–ª—è –Ω–æ–≤—ã—Ö)
- –®–∞–≥ 2: –í–≤–æ–¥ –∫–æ–¥–∞ –∏–∑ SMS
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤—ã–π/—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞
- –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω –≤ —Å—Ç–∏–ª–µ Ozon

‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- Header —Å –∫–Ω–æ–ø–∫–æ–π "–í–æ–π—Ç–∏"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å backend

Backend —É–∂–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:8000

### 2. –û—Ç–∫—Ä—ã—Ç—å frontend

Frontend —É–∂–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:3001

### 3. –¢–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

1. –û—Ç–∫—Ä–æ–π http://localhost:3001
2. –ù–∞–∂–º–∏ "–í–æ–π—Ç–∏" –≤ header
3. –í–≤–µ–¥–∏ —Ç–µ–ª–µ—Ñ–æ–Ω: `+79991234567`
4. –í–≤–µ–¥–∏ –§–ò–û: `–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤`
5. –ù–∞–∂–º–∏ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
6. –í –∫–æ–Ω—Å–æ–ª–∏ backend —É–≤–∏–¥–∏—à—å SMS –∫–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456`)
7. –í–≤–µ–¥–∏ –∫–æ–¥ –≤ —Ñ–æ—Ä–º—É
8. –ù–∞–∂–º–∏ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
9. ‚úÖ –¢—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –Ω–∞ 90 –¥–Ω–µ–π!

### 4. –¢–µ—Å—Ç –≤—Ö–æ–¥–∞

1. –ù–∞–∂–º–∏ "–í—ã–π—Ç–∏" (–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ header)
2. –ù–∞–∂–º–∏ "–í–æ–π—Ç–∏"
3. –í–≤–µ–¥–∏ —Ç–æ—Ç –∂–µ —Ç–µ–ª–µ—Ñ–æ–Ω: `+79991234567`
4. –ù–∞–∂–º–∏ "–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥" (–§–ò–û –Ω–µ –Ω—É–∂–Ω–æ!)
5. –í–≤–µ–¥–∏ –Ω–æ–≤—ã–π –∫–æ–¥ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏
6. ‚úÖ –°–Ω–æ–≤–∞ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω!

---

## üì± –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

### –ö–æ–Ω—Å–æ–ª—å backend –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ SMS:

```
==================================================
üì± SMS –û–¢–ü–†–ê–í–õ–ï–ù–û –ù–ê +79991234567
üîê –ö–û–î: 123456
‚è∞ –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 5 –º–∏–Ω—É—Ç
==================================================

INFO:     127.0.0.1:52000 - "POST /api/auth/send-sms HTTP/1.1" 200 OK
‚úÖ –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: +79991234567
```

### –ö–æ–Ω—Å–æ–ª—å backend –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ–¥–∞:

```
INFO:     127.0.0.1:52001 - "POST /api/auth/verify-sms HTTP/1.1" 200 OK
‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥: +79991234567
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### Backend (.env)

```env
SECRET_KEY=your-secret-key-change-in-production
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/edu_na_bazar
REDIS_URL=redis://localhost:6380/0

# SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä (TODO: –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
# SMS_RU_API_KEY=your-api-key
# SMSC_LOGIN=your-login
# SMSC_PASSWORD=your-password
```

### Frontend

–¢–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤:
- `localStorage.auth_token`
- `localStorage.user`
- Zustand persist storage

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```sql
SELECT * FROM users;
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SMS –∫–æ–¥—ã:

```sql
SELECT * FROM sms_codes ORDER BY created_at DESC;
```

---

## üé® –î–∏–∑–∞–π–Ω

–§–æ—Ä–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ —Å—Ç–∏–ª–µ Ozon:
- ‚úÖ –°–∏–Ω–∏–π —Ü–≤–µ—Ç (#005BFF)
- ‚úÖ –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã (12px)
- ‚úÖ –ö—Ä—É–ø–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (48px)
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–µ –ø–æ–ª—è –≤–≤–æ–¥–∞ DevExtreme
- ‚úÖ –ñ–µ–ª—Ç–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ —Å –∫–æ–¥–æ–º (DEV —Ä–µ–∂–∏–º)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å –ø–æ–¥–ø–∏—Å—å—é  
‚úÖ –ò—Å—Ç–µ—á–µ–Ω–∏–µ –∫–æ–¥–æ–≤ —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç  
‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ (3 –ø–æ–ø—ã—Ç–∫–∏)  
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤  
‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤  
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  

### TODO –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:

- [ ] Rate limiting (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)
- [ ] Captcha –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
- [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ N –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º
- [ ] HTTPS –¥–ª—è API
- [ ] Refresh tokens (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `SMS_AUTH_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ SMS-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `README.md` - –æ–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- `QUICKSTART.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `PROJECT_RULES.md` - –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞** (SMS.RU, SMSC.RU, Twilio)
2. **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)
3. **–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤** (–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö)
4. **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤)
5. **–ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏** (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞–º–∏)

---

## ‚ú® –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ SMS-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–ü–æ–ø—Ä–æ–±—É–π –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:**
1. –û—Ç–∫—Ä–æ–π http://localhost:3001
2. –ù–∞–∂–º–∏ "–í–æ–π—Ç–∏"
3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è —á–µ—Ä–µ–∑ SMS

üéâ **–ù–∞—Å–ª–∞–∂–¥–∞–π—Å—è!**
