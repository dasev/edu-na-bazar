# –ê–Ω–∞–ª–∏–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—Ç–∞—Ä–æ–π MySQL –±–∞–∑—ã (enb)

## üìä –û–±–∑–æ—Ä —Ç–∞–±–ª–∏—Ü –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. üè™ companies ‚Üí store_owners (–ú–∞–≥–∞–∑–∏–Ω—ã)

**–°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞:** `companies` (79.7 MB)
**–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞:** `market.store_owners`

**–í–µ—Ä–æ—è—Ç–Ω—ã–µ –ø–æ–ª—è –≤ —Å—Ç–∞—Ä–æ–π –±–∞–∑–µ:**
- `id` - ID –∫–æ–º–ø–∞–Ω–∏–∏
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ
- `user_id` - –í–ª–∞–¥–µ–ª–µ—Ü (—Å–≤—è–∑—å —Å user)
- `phone` - –¢–µ–ª–µ—Ñ–æ–Ω
- `email` - Email
- `address` - –ê–¥—Ä–µ—Å
- `logo` - –õ–æ–≥–æ—Ç–∏–ø
- `status` - –°—Ç–∞—Ç—É—Å (–∞–∫—Ç–∏–≤–Ω–∞/–Ω–µ–∞–∫—Ç–∏–≤–Ω–∞)
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `category_id` - –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∫–æ–º–ø–∞–Ω–∏–∏

**–ü–æ–ª—è –≤ –Ω–æ–≤–æ–π –±–∞–∑–µ:**
```sql
CREATE TABLE market.store_owners (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT REFERENCES auth.users(id),
    name TEXT NOT NULL,
    description TEXT,
    logo TEXT,
    banner TEXT,
    phone TEXT,
    email TEXT,
    address TEXT,
    status TEXT DEFAULT 'pending', -- 'pending', 'approved', 'rejected'
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

**‚ùó –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è –≤ –Ω–æ–≤–æ–π –±–∞–∑–µ:**
- ‚úÖ `category_id` - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—Å–ª–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ `inn` / `ogrn` - —Ä–µ–∫–≤–∏–∑–∏—Ç—ã (–µ—Å–ª–∏ –±—ã–ª–∏)
- ‚úÖ `working_hours` - —á–∞—Å—ã —Ä–∞–±–æ—Ç—ã
- ‚úÖ `website` - —Å–∞–π—Ç –∫–æ–º–ø–∞–Ω–∏–∏

---

### 2. üì¶ advert ‚Üí products (–¢–æ–≤–∞—Ä—ã/–û–±—ä—è–≤–ª–µ–Ω–∏—è)

**–°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞:** `advert` (30.4 MB)
**–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞:** `market.products`

**–í–µ—Ä–æ—è—Ç–Ω—ã–µ –ø–æ–ª—è –≤ —Å—Ç–∞—Ä–æ–π –±–∞–∑–µ:**
- `id` - ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `title` / `name` - –ù–∞–∑–≤–∞–Ω–∏–µ
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ
- `price` - –¶–µ–Ω–∞
- `company_id` - –ö–æ–º–ø–∞–Ω–∏—è (–ø—Ä–æ–¥–∞–≤–µ—Ü)
- `category_id` - –ö–∞—Ç–µ–≥–æ—Ä–∏—è
- `user_id` - –ê–≤—Ç–æ—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `phone` - –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω
- `email` - Email
- `address` - –ê–¥—Ä–µ—Å/–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- `status` - –°—Ç–∞—Ç—É—Å (–∞–∫—Ç–∏–≤–Ω–æ/–Ω–µ–∞–∫—Ç–∏–≤–Ω–æ)
- `views` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `image` - –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

**–ü–æ–ª—è –≤ –Ω–æ–≤–æ–π –±–∞–∑–µ:**
```sql
CREATE TABLE market.products (
    id BIGSERIAL PRIMARY KEY,
    store_owner_id BIGINT REFERENCES market.store_owners(id),
    name TEXT NOT NULL,
    description TEXT,
    price NUMERIC(10,2) NOT NULL,
    image TEXT,
    category_id BIGINT REFERENCES market.categories(id),
    rating NUMERIC(3,2) DEFAULT 0,
    reviews_count INTEGER DEFAULT 0,
    in_stock BOOLEAN DEFAULT TRUE,
    unit TEXT DEFAULT '—à—Ç',
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

**‚ùó –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è –≤ –Ω–æ–≤–æ–π –±–∞–∑–µ:**
- ‚úÖ `views` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å)
- ‚úÖ `phone` - –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω –ø—Ä–æ–¥–∞–≤—Ü–∞
- ‚úÖ `email` - email –ø—Ä–æ–¥–∞–≤—Ü–∞
- ‚úÖ `address` - –∞–¥—Ä–µ—Å/–º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ `status` - —Å—Ç–∞—Ç—É—Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–∞–∫—Ç–∏–≤–Ω–æ/–∞—Ä—Ö–∏–≤/–º–æ–¥–µ—Ä–∞—Ü–∏—è)
- ‚úÖ `old_price` - —Å—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ (–¥–ª—è —Å–∫–∏–¥–æ–∫) - **–£–ñ–ï –ï–°–¢–¨**

---

### 3. üë§ user ‚Üí users (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

**–°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞:** `user` (9.4 MB)
**–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞:** `auth.users`

**–í–µ—Ä–æ—è—Ç–Ω—ã–µ –ø–æ–ª—è –≤ —Å—Ç–∞—Ä–æ–π –±–∞–∑–µ:**
- `id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `username` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `email` - Email
- `phone` - –¢–µ–ª–µ—Ñ–æ–Ω
- `password_hash` - –•–µ—à –ø–∞—Ä–æ–ª—è
- `auth_key` - –ö–ª—é—á –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `status` - –°—Ç–∞—Ç—É—Å (10 = –∞–∫—Ç–∏–≤–µ–Ω)
- `created_at` - –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `last_login` - –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥
- `avatar` - –ê–≤–∞—Ç–∞—Ä
- `first_name` / `last_name` - –ò–º—è/–§–∞–º–∏–ª–∏—è

**–ü–æ–ª—è –≤ –Ω–æ–≤–æ–π –±–∞–∑–µ:**
```sql
CREATE TABLE auth.users (
    id BIGSERIAL PRIMARY KEY,
    phone TEXT UNIQUE NOT NULL,
    full_name TEXT,
    email TEXT,
    avatar TEXT,
    address TEXT,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

**‚ùó –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è –≤ –Ω–æ–≤–æ–π –±–∞–∑–µ:**
- ‚úÖ `last_login` - –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥
- ‚úÖ `status` - —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–∫—Ç–∏–≤–µ–Ω/–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)
- ‚ö†Ô∏è `password_hash` - —É –Ω–∞—Å SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –ø–∞—Ä–æ–ª–∏ –Ω–µ –Ω—É–∂–Ω—ã

---

### 4. üñºÔ∏è file ‚Üí product_images (–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)

**–°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞:** `file` (11.5 MB)
**–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞:** `market.product_images`

**–í–µ—Ä–æ—è—Ç–Ω—ã–µ –ø–æ–ª—è –≤ —Å—Ç–∞—Ä–æ–π –±–∞–∑–µ:**
- `id` - ID —Ñ–∞–π–ª–∞
- `name` - –ò–º—è —Ñ–∞–π–ª–∞
- `path` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
- `url` - URL —Ñ–∞–π–ª–∞
- `type` - –¢–∏–ø —Ñ–∞–π–ª–∞
- `size` - –†–∞–∑–º–µ—Ä
- `model` - –ú–æ–¥–µ–ª—å (advert, company, user)
- `model_id` - ID –º–æ–¥–µ–ª–∏
- `created_at` - –î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏

**–ü–æ–ª—è –≤ –Ω–æ–≤–æ–π –±–∞–∑–µ:**
```sql
CREATE TABLE market.product_images (
    id BIGSERIAL PRIMARY KEY,
    product_id BIGINT REFERENCES market.products(id) ON DELETE CASCADE,
    image_url TEXT NOT NULL,
    sort_order INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT NOW()
);
```

**‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç!**

---

### 5. üìÅ categories ‚Üí categories (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏)

**–°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞:** `categories` (98 KB)
**–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞:** `market.categories`

**–í–µ—Ä–æ—è—Ç–Ω—ã–µ –ø–æ–ª—è –≤ —Å—Ç–∞—Ä–æ–π –±–∞–∑–µ:**
- `id` - ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ
- `slug` - URL slug
- `parent_id` - –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- `icon` / `image` - –ò–∫–æ–Ω–∫–∞
- `sort_order` - –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `status` - –°—Ç–∞—Ç—É—Å

**–ü–æ–ª—è –≤ –Ω–æ–≤–æ–π –±–∞–∑–µ:**
```sql
CREATE TABLE market.categories (
    id BIGSERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    slug TEXT UNIQUE NOT NULL,
    image TEXT,
    parent_id BIGINT REFERENCES market.categories(id),
    created_at TIMESTAMP DEFAULT NOW()
);
```

**‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç!**

---

## üîß –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –Ω–æ–≤–æ–π –±–∞–∑–µ

### 1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ `market.products`:

```sql
ALTER TABLE market.products 
ADD COLUMN views INTEGER DEFAULT 0,
ADD COLUMN contact_phone TEXT,
ADD COLUMN contact_email TEXT,
ADD COLUMN location TEXT,
ADD COLUMN status TEXT DEFAULT 'active'; -- 'active', 'archived', 'moderation'
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ `market.store_owners`:

```sql
ALTER TABLE market.store_owners 
ADD COLUMN category_id BIGINT REFERENCES market.categories(id),
ADD COLUMN inn TEXT,
ADD COLUMN ogrn TEXT,
ADD COLUMN working_hours TEXT,
ADD COLUMN website TEXT;
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ `auth.users`:

```sql
ALTER TABLE auth.users 
ADD COLUMN last_login TIMESTAMP,
ADD COLUMN status TEXT DEFAULT 'active'; -- 'active', 'blocked'
```

---

## üìã –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å MySQL —Å–µ—Ä–≤–µ—Ä —Å –±–∞–∑–æ–π enb
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è –≤ PostgreSQL
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

### –≠—Ç–∞–ø 2: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** (user ‚Üí users)
   - –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö (status = 10)
   - –¢–µ–ª–µ—Ñ–æ–Ω –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
   
2. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏** (categories ‚Üí categories)
   - –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é (parent_id)
   
3. **–ú–∞–≥–∞–∑–∏–Ω—ã** (companies ‚Üí store_owners)
   - –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å status = 'approved' –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö
   
4. **–¢–æ–≤–∞—Ä—ã** (advert ‚Üí products)
   - –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ –º–∞–≥–∞–∑–∏–Ω–∞–º
   - –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å in_stock = true –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö
   
5. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** (file ‚Üí product_images)
   - –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å advert
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –≤ /uploads

### –≠—Ç–∞–ø 3: –ü—Ä–æ–≤–µ—Ä–∫–∞
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ø—Ä–∏–º–µ—Ä–Ω–∞—è)

- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** ~1000-5000
- **–ú–∞–≥–∞–∑–∏–Ω—ã:** ~500-2000 (79.7 MB)
- **–¢–æ–≤–∞—Ä—ã:** ~5000-20000 (30.4 MB)
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:** ~10000-50000 (11.5 MB)
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:** ~50-200

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–µ–ª–µ—Ñ–æ–Ω—ã:** –í —Å—Ç–∞—Ä–æ–π –±–∞–∑–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã, –Ω—É–∂–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
2. **–ü–∞—Ä–æ–ª–∏:** –ù–µ –º–∏–≥—Ä–∏—Ä—É–µ–º, —Ç.–∫. –∏—Å–ø–æ–ª—å–∑—É–µ–º SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
3. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:** –ù—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
4. **–°—Ç–∞—Ç—É—Å—ã:** –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏–∑ —Å—Ç–∞—Ä–æ–π –±–∞–∑—ã –≤ –Ω–æ–≤—É—é
5. **ID:** –ù–æ–≤—ã–µ ID –±—É–¥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è, –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å MySQL —Å–µ—Ä–≤–µ—Ä
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç analyze_mysql_structure.py –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
3. –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è –≤ PostgreSQL
4. –°–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
